<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>eRestaurant</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/cash-register.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="stylesheet" href="css/reports.css" />
  </head>
  <body>
    <nav id="sidebar">
      <ul>
        <li>
          <span class="logo">E-Restaurant</span>
          <button onclick="toggleSidebar()" id="toggle-btn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e3e3e3"
            >
              <path
                d="m313-480 155 156q11 11 11.5 27.5T468-268q-11 11-28 11t-28-11L228-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T468-692q11 11 11 28t-11 28L313-480Zm264 0 155 156q11 11 11.5 27.5T732-268q-11 11-28 11t-28-11L492-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T732-692q11 11 11 28t-11 28L577-480Z"
              />
            </svg>
          </button>
        </li>
        <li class="active">
          <a href="home.html">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e3e3e3"
            >
              <path
                d="M240-200h120v-200q0-17 11.5-28.5T400-440h160q17 0 28.5 11.5T600-400v200h120v-360L480-740 240-560v360Zm-80 0v-360q0-19 8.5-36t23.5-28l240-180q21-16 48-16t48 16l240 180q15 11 23.5 28t8.5 36v360q0 33-23.5 56.5T720-120H560q-17 0-28.5-11.5T520-160v-200h-80v200q0 17-11.5 28.5T400-120H240q-33 0-56.5-23.5T160-200Zm320-270Z"
              />
            </svg>
            <span>Inicio</span>
          </a>
        </li>
        <li>
          <button onclick="toggleSubMenu(this)" class="dropdown-btn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e3e3e3"
            >
              <path
                d="M200-320v-200q0-17 11.5-28.5T240-560q17 0 28.5 11.5T280-520v200q0 17-11.5 28.5T240-280q-17 0-28.5-11.5T200-320Zm240 0v-200q0-17 11.5-28.5T480-560q17 0 28.5 11.5T520-520v200q0 17-11.5 28.5T480-280q-17 0-28.5-11.5T440-320ZM120-120q-17 0-28.5-11.5T80-160q0-17 11.5-28.5T120-200h720q17 0 28.5 11.5T880-160q0 17-11.5 28.5T840-120H120Zm560-200v-200q0-17 11.5-28.5T720-560q17 0 28.5 11.5T760-520v200q0 17-11.5 28.5T720-280q-17 0-28.5-11.5T680-320Zm160-320H116q-15 0-25.5-10.5T80-676v-22q0-11 5.5-19t14.5-13l344-172q17-8 36-8t36 8l342 171q11 5 16.5 15t5.5 21v15q0 17-11.5 28.5T840-640Zm-582-80h444-444Zm0 0h444L480-830 258-720Z"
              />
            </svg>
            <span>Cajero</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e3e3e3"
            >
              <path
                d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z"
              />
            </svg>
          </button>
          <ul class="sub-menu">
            <div>
              <li><a href="cash-register.html">Caja</a></li>
              <li><a href="expenses.html">Gastos</a></li>
            </div>
          </ul>
        </li>

        <li>
          <a href="reports.html">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e3e3e3"
            >
              <path
                d="M360-480q-17 0-28.5-11.5T320-520q0-17 11.5-28.5T360-560h240q17 0 28.5 11.5T640-520q0 17-11.5 28.5T600-480H360Zm0-160q-17 0-28.5-11.5T320-680q0-17 11.5-28.5T360-720h240q17 0 28.5 11.5T640-680q0 17-11.5 28.5T600-640H360ZM240-400h300q29 0 54 12.5t42 35.5l84 110v-558H240v400Zm0 240h442L573-303q-6-8-14.5-12.5T540-320H240v160Zm480 80H240q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h480q33 0 56.5 23.5T800-800v640q0 33-23.5 56.5T720-80Zm-480-80v-640 640Zm0-160v-80 80Z"
              />
            </svg>
            <span>Reportes</span>
          </a>
        </li>
      </ul>
    </nav>
    <main id="main"></main>
    <script type="text/javascript" src="js/sidebar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
      $("#sidebar a").on("click", function (e) {
        e.preventDefault();

        // Eliminar la clase active de todos los elementos
        $("#sidebar li").removeClass("active");

        // Agregar la clase active al elemento padre (li) del enlace clicado
        $(this).parent("li").addClass("active");

        // Cargar el contenido
        var url = $(this).attr("href");
        $("#main").load(url, function (response, status, xhr) {
          if (status == "error") {
            $("#main").html(
              "<p>Lo sentimos, ocurrió un error al cargar el contenido.</p>"
            );
          } else {
            // Verificar qué página se cargó
            if (url === "cash-register.html") {
              // Remover cualquier script anterior para evitar duplicación
              $("script[src='js/cash-register.js']").remove();

              // Cargar el script con jQuery para mejor compatibilidad
              $.getScript("js/cash-register.js")
                .done(function () {
                  console.log(
                    "Script de caja registradora cargado correctamente"
                  );
                })
                .fail(function (jqxhr, settings, exception) {
                  console.error("Error al cargar el script: " + exception);
                });
            }
          }
        });
      });
    </script>
  </body>
</html>
